# Telegram-бот

## Описание
Telegram-бот с бэкендом, реализованным с помощью FastAPI.

#### Установить проект себе можно, прописав команды в командной строке:
- `git clone https://github.com/Anatoliy2610/bot_tg.git`
- `make install` (установятся зависимости из файла requirements.txt)

## Как пользоваться
### Что нужно сделать
- заполнить по примеру (.env-example) .env файл
- Запуск локального хоста осуществляется командой `make run`. Через postman или `http://127.0.0.1:8000/docs` можно осуществить взаимодействие с базой данных: просмотреть, добавить, удалить данные. Изменение данных возможно после регистрации и аутентификации.
- Запуск бота осуществляется командой `make bot`. При взаимодействии с ботом будут представлены возможные команды после команды `/start`.
- Остановка бота или локального хоста осуществляется в командной строке (терминале) зажатием клавиш "ctrl" + "c".

### Доступные эндпоинты
#### Пользователи
- `http://127.0.0.1:8000/users` - выводит список всех пользователей
- `http://127.0.0.1:8000/register` - прохождение регистрации
- `http://127.0.0.1:8000/login` - прохождение аутентификации
Для успешной регистрации необходимо отправить POST запрос и добавить в BODY username, email, password в формате JSON.
пример:
```
{
  "username": "string",
  "email": "user@example.com",
  "password": "string"
}
```
Чтобы войти в систему, необходимо отправить POST запрос, добавить в BODY email и password, что указывали при регистрации. На выходе Вы получите Bearer Token, который потребуется для перехода на следующие эндпоинты в Authorization.
#### Посты
- `http://127.0.0.1:8000/posts` - выводит список всех постов
- `http://127.0.0.1:8000/post/add` - добавляет новый пост в базу данных
- `http://127.0.0.1:8000/post/update` - вносит изменения в посте. Можно изменить title или content. Эндпоинт защищены JWT токеном, то есть пользователю необходимо аутентифицироваться при помощи Bearer Token.
- `http://127.0.0.1:8000/post/delete` - удаляет указанный пост из базы данных
Для успешной добавления поста необходимо отправить POST запрос и добавить в BODY title и content в формате JSON.
пример:
```
{
  "title": "string",
  "content": "string"
}
```

### База данных
В базе данных есть таблицы:
- 'users' хранит в себе информацию о пользователях;
- 'posts' хранит в себе информацию о постах.


#### В проекте присутствуют линтер ruff и библиотека сортировки:
- `make check` (запускает проверку линтера)
- `make format` (исправляет ошибки линтера)
- `isort app` (исправляет импорты)
